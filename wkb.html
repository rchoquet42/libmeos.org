<!doctype html>
<html>
<head>
  <title>MEOS Well-Known Binary</title>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="css/style.css">
</head>
<body>
<article>
  <img class="img_center" src="images/meos.png" alt="meos logo">
  <h1>Disclaimer: The MEOS library and this website are in development!</h1>

  <h1>Well-Known Binary (WKB)</h1>
  <div>
    <p>&ldquo;Well-known binary&rdquo; is a scheme for writing moving features into a platform-independent array of bytes, usually for transport between systems or between programs. By using WKB, systems can avoid exposing their particular internal implementation of geometry storage, for greater overall interoperability. It is an extension of the scheme for writing a <a href="https://en.wikipedia.org/wiki/Simple_Features">simple features</a> geometry into a <a href="https://libgeos.org/specifications/wkb/">platform-independent array of bytes</a>.</p>
  </div>

  <h2 id="data-types">Data Types</a></h2>
  <div>
    <p>The WKB specification uses five basic types common to most typed languages: an unsigned byte, a 4-byte unsigned integer, an 8-byte unsigned integer, an <a href="https://en.wikipedia.org/wiki/Double-precision_floating-point_format">8-byte IEEE double</a>, and a string of characters.</p>
    <pre tabindex="0"><code>// byte : 1 byte
// uint32 : 32 bit unsigned integer (4 bytes)
// uint64 : 64 bit unsigned integer (8 bytes)
// double : double precision number (8 bytes)
// string : string of characters (variable number of bytes)
</code></pre>
  </div>

  <h2 id="byte-order">Byte Order</h2>
  <div>
    <p>In order to allow portability between systems with difference architectures, the representation of those types is conditioned by the <code>wkbByteOrder</code>.</p>
    <pre tabindex="0"><code>enum wkbByteOrder  {
    wkbXDR = 0, // Big Endian
    wkbNDR = 1  // Little Endian
};
</code></pre>
    <p>A &ldquo;little endian&rdquo; integer has the least-significant bytes first, hence &ldquo;little&rdquo;. For example, the number 1, encoded in little- and big- endian:</p>
    <pre tabindex="0"><code># Little endian
01 00 00 00

# Big endian
00 00 00 01
</code></pre>
    <p>In practice this means that almost all WKB is encoded little endian, since most modern processors are little endian, but the existence of the <code>wkbByteOrder</code> allows WKB to transport geometry easily between systems of different endianness.</p>
  </div>

  <h2 id="examples">Examples</a></h2>
  <div>
    <p>Blah blah blah</a>.</p>
  </div>





  <h2 id="examples">Examples</a></h2>
  <div>
    <ul>
      <li>true@2022-01-01 08:00:00</li>
      <li>1@2022-01-01 08:00:00</li>
      <li>2.5@2022-01-01 08:00:00</li>
      <li>walking@2022-01-01 08:00:00</li>
      <li>POINT(0 0)@2022-01-01 08:00:00</li>
      <li>SRID=5676;Point(1 1)@2022-01-01 08:00:00</li>
      <li>{1@2022-01-01 08:00:00, 2@2022-01-01 09:00:00}</li>
      <li>[POINT(1 1)@2022-01-01 08:00:00, POINT(2 2)@2022-01-01 09:00:00]</li>
      <li>{[driving@2022-01-01 08:00:00, driving@2022-01-01 09:00:00], [walking@2022-01-01 10:00:00, walking@2022-01-01 11:00:00]}</li>
      <li>{[POINT(1 1)@2022-01-01 08:00:00, POINT(2 2)@2022-01-01 09:00:00], [POINT(3 3)@2022-01-01 10:00:00, POINT(3 3)@2022-01-01 11:00:00]}</li>
    </ul>
  </div>

  <h2 id="wkt-bnf">WKT BNF</h2>
  <div>
        <pre tabindex="0"><code>
&lt;at&gt; ::= @
&lt;comma&gt; ::= ,
&lt;equal&gt; ::= =
&lt;semicolon&gt; ::= ;
&lt;left paren&gt; ::= (
&lt;right paren&gt; ::= )
&lt;left bracket&gt; ::= [
&lt;right bracket&gt; ::= ]
&lt;left brace&gt; ::= {
&lt;right brace&gt; ::= }
&lt;srid&gt; ::= SRID
&lt;z&gt; ::= Z

&lt;b&gt; ::= &lt;boolean&gt;
&lt;f&gt; ::= &lt;float&gt;
&lt;i&gt; ::= &lt;integer&gt;
&lt;s&gt; ::= &lt;string&gt;
&lt;t&gt; ::= &lt;timestamp&gt;

&lt;bool representation&gt; ::= &lt;b&gt;
&lt;int representation&gt; ::= &lt;i&gt;
&lt;float representation&gt; ::= &lt;f&gt;
&lt;text representation&gt; ::= &lt;s&gt;

&lt;x coord&gt; ::= &lt;f&gt;
&lt;y coord&gt; ::= &lt;f&gt;
&lt;z coord&gt; ::= &lt;f&gt;
&lt;coords&gt; ::= &lt;x coord&gt; &lt;y coord&gt; [ &lt;z coord&gt; ]
&lt;srid representation&gt; ::= &lt;srid&gt; &lt;equal&gt; &lt;i&gt; &lt;semicolon&gt;
&lt;point representation&gt; ::=
    [ &lt;srid&gt; ] POINT [ &lt;z&gt; ] &lt;left paren&gt; &lt;coords&gt; &lt;right paren&gt;

&lt;base representation&gt; ::=
    &lt;bool representation&gt; |
    &lt;int representation&gt; |
    &lt;float representation&gt; |
    &lt;text representation&gt; |
    &lt;point representation&gt; |

&lt;tinstant&gt; ::=
    &lt;base representation&gt; &lt;at&gt; &lt;t&gt;
&lt;tinstant set&gt; ::=
    &lt;left brace&gt; &lt;tinstant&gt; {&lt;comma&gt; &lt;tinstant&gt;} ... &lt;right brace&gt;
&lt;tsequence set&gt; ::=
    &lt;left bracket&gt; &lt;tinstant&gt; {&lt;comma&gt; &lt;tinstant&gt;} ... &lt;right bracket&gt;
&lt;tsequence set&gt; ::=
    &lt;left brace&gt; &lt;tsequence&gt; {&lt;comma&gt; &lt;tsequence&gt;} ... &lt;right brace&gt;

&lt;wkt representation&gt; ::=
    &lt;tinstant&gt; |
    &lt;tinstant set&gt; |
    &lt;tsequence&gt; |
    &lt;tsequence set&gt;
</code></pre>
  </div>

  <h2 id="writing-wkt">Writing WKT</h2>
  <div>
    <p>Because WKT is a decimal text output, it will never be able to exactly represent the underlying machine representation of the coordinates. In general, WKT is used for display to humans, or for transport when exact coordinate representation is not required (some web applications).</p>

    <p>Accordingly, MEOS allows you to customize the coordinate precision and rounding behaviour, as well as the dimensionality of WKT output.</p>

    <pre tabindex="0"><code>
/* Read an instant */
const char *wkt_in = "Point(1 1 1,2 2 2)@2022-01-01";
TInstant *inst = tgeompoint_from_text(inst_str);

/* Generate the output WKT */
 * The first argument sets the number places after the decimal to output in WKT. Default 16.
 * The second argument sets the number of dimension to output in WKT. Default is as in the data.
 */
unsigned char *wkt = tgeompoint_as_text(inst, 6, 2);

/* do something ... */

/* Free the allocated memory */
free(wkt_in);
free(wkt_out);
free(inst);
</code></pre>
  </div>

</article>
</body>
</html>